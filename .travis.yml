language: php

php:
    #- 5.3.3
    #- 5.3
    #- 5.4
    #- 5.5
    #- 5.6
    - hhvm

matrix:
    allow_failures:
        - php: hhvm

env:
#    - SYMFONY_VERSION=2.3
#    - SYMFONY_VERSION=2.4
#    - SYMFONY_VERSION=2.5
    - SYMFONY_VERSION=2.6

before_install:
    - if (php --version | grep -i HipHop > /dev/null); then sudo bin/ci/install_g++.sh; fi
    - sudo mkdir /etc/hhvm -p
    - sudo touch /etc/hhvm/php.ini
    - sudo chmod ugo+rw /etc/hhvm/php.ini

before_script:
    - bin/ci/install_mongo.sh
    - if [ $(php -v | grep '5.3.3' -c) -ne 0 ]; then export PREFER="--prefer-source"; else PREFER="--prefer-dist"; fi
    - composer require symfony/framework-bundle:${SYMFONY_VERSION} ${PREFER} --no-interaction --no-progress

notifications:
    email:
        - tomas.pecserke@gmail.com
